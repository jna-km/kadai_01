# APIレスポンス設計ガイドライン

このプロジェクトでは、Laravelの標準機能に則ったJSONレスポンス形式を採用し、統一された出力を目指します。独自ライブラリやラッパークラスは使わず、Laravel提供の `response()->json()` を基本とします。

---

## ✅ 成功時のレスポンス

```json
{
  "status": "success",
  "message": "操作が完了しました。",
  "data": { ... }
}
```

- `status`：必須。`success` を固定値として使用
- `message`：成功した操作内容を簡潔に
- `data`：返却オブジェクトや配列（必要に応じて）

---

## ❌ 失敗時のレスポンス（例）

```json
{
  "status": "error",
  "message": "バリデーションエラーがあります。",
  "errors": {
    "name": ["名前は必須です。"],
    "email": ["無効な形式です。"]
  }
}
```

- `status`：必須。`error` を固定値として使用
- `message`：概要を示す一文（例：バリデーションエラー）
- `errors`：バリデーション失敗時など、フィールドごとの詳細

---

## 🔁 注意点

- Laravelの `FormRequest` によるバリデーションエラーは自動的に `422 Unprocessable Entity` として返るため、カスタマイズが不要な限り標準挙動を優先します。
- コントローラーでは `return response()->json([...], 200)` などの形式を推奨します。
- 今後オリジナルのラッパークラス `ApiResponse` 等を導入する場合は、ここに追記して整合性を保ちます。

---
### 🔒 ラッパークラスを使わない理由

本プロジェクトでは、`ApiResponse` などの独自ラッパークラスは使用せず、Laravel標準の `response()->json()` をそのまま利用します。理由は以下の通りです：

- Laravel標準の `response()->json()` は柔軟性・可読性が高く、個別カスタマイズなしでも十分な表現力があるため
- ラッパークラスを導入すると、他の開発者との共通理解が崩れたり、ドキュメントやチュートリアルと乖離が生じる
- モック・ユニットテスト・エラー検証の際に、Laravelの標準仕様をそのまま使った方が扱いやすい
- チーム開発や外部連携において、「Laravelの一般的な書き方」で統一しておく方が引き継ぎが容易になる

---

### 📌 チーム開発における方針

- 初学者〜経験者が混在する現場を想定し、「Laravelのドキュメントやコミュニティに沿った書き方」を優先します
- 将来的に共通化・構造化が必要な場合でも、まずはこのガイドラインを更新してから導入すること
- コントローラ内では `return response()->json([...], ステータスコード);` を基本形とし、成功／失敗に応じて `status`, `message`, `data`, `errors` を適宜付与する方針です

---
--- フッター開始 ---

[← READMEに戻る](../README.md)

## 📚 ドキュメント一覧

- [プロジェクト概要](project-overview.md)
- [機能一覧](features.md)
- [画面・機能対応表](function_screen_map.md)
- [画面定義](screens.md)
- [ユースケース定義](usecase_reserve.md)
- [機能要件](functional_requirements.md)
- [コーディングルール](coding-rules.md)
- [APIレスポンス設計ガイドライン](api_response.md)
- [ショートカット](shortcuts.md)
- [画面遷移図（PDF）](画面遷移図.pdf)
- [ワイヤーフレーム（PDF）](ワイヤーフレーム.pdf)

### 作業ログ
- [2025-07-07](logs/2025-07-07.md)
- [2025-07-08](logs/2025-07-08.md)
- [2025-07-09](logs/2025-07-09.md)
- [2025-07-10](logs/2025-07-10.md)

--- フッター終了 ---
